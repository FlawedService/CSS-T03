/*C3*/SET SCHEMA PUBLIC
DROP TABLE RESIDENCE if exists
DROP TABLE SALE if exists
DROP TABLE CUSTOMER if exists
CREATE TABLE CUSTOMER (ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY NOT NULL, DESIGNATION VARCHAR(50) NOT NULL, PHONENUMBER INTEGER, VATNUMBER INTEGER NOT NULL UNIQUE)
CREATE TABLE RESIDENCE (ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY NOT NULL, PLACE VARCHAR(50) NOT NULL, CUSTOMER_ID INTEGER NOT NULL)
CREATE TABLE SALE (ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1) PRIMARY KEY NOT NULL, DATE DATE, TOTAL DOUBLE, STATUS CHAR(1), CUSTOMER_ID INTEGER NOT NULL)
ALTER TABLE RESIDENCE ADD CONSTRAINT FK_RESIDENCE_ID FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER (VATNUMBER)
INSERT INTO CUSTOMER VALUES(1,'JOSE FARIA',914276732,197672337)
COMMIT
INSERT INTO CUSTOMER VALUES(2,'LUIS SANTOS',964294317,168027852)
COMMIT
INSERT INTO RESIDENCE VALUES(1,'Rua do spot',197672337)
COMMIT
DISCONNECT
